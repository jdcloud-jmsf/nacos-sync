apiVersion: v1
kind: List
items:
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      meta.helm.sh/release-name: mesh
      meta.helm.sh/release-namespace: mesh
    labels:
      inputType: integrations
      integration: tpaas-jmsf
      release: brolly
    name: tpaas-jmsf-nacos-sync
    namespace: brolly
  spec:
    endpoints:
    - path: /actuator/prometheus
      port: http
      relabelings:
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_name
        targetLabel: app_name
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_instance
        targetLabel: app_instance
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_component
        targetLabel: app_component
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_managed_by
        targetLabel: app_managed_by
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_deploy_by
        targetLabel: app_deployed_by
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_app_kubernetes_io_version
        targetLabel: app_version
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_jmsf_jd_com_component
        targetLabel: jmsf_component
      - action: replace
        sourceLabels:
        - __meta_kubernetes_service_label_jmsf_jd_com_manage_by
        targetLabel: jmsf_manage_by
      - action: labelmap
        regex: __meta_kubernetes_pod_label_(.+)
      - action: replace
        regex: ^jmsf-$
        replacement: tpaas-jmsf
        sourceLabels:
        - app_name
        targetLabel: integration
    namespaceSelector:
      any: true
    selector:
      matchLabels:
        app: nacos-sync